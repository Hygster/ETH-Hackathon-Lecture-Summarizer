{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>TLDR; Lecture</title>
    {# TODO: Add Favicon #}
    <link rel="stylesheet" href="{% static 'main.css' %}" />
    <link rel="stylesheet" href="{% static 'summary.css' %}" />
  </head>

  <body>
    <header class="header">
      <div class="first-row">
        <div class="page-title">
          <a href="/">TLDR; <sub>Lectures</sub></a>
        </div>
        <div class="account-login-wrapper">
          <div class="welcome-text">Welcome, Patricia ✨</div>
          <img class="log-out-icon" src="img/log-out-icon.svg" />
        </div>
      </div>
      <nav class="breadcrumbs">
        <div class="breadcrumbs-text">
          <a href="/">Home</a> » <a href="/classes/{{ video.lecture_id.id }}">{{ lecture.lecture_name }}</a> » {{ video.infered_titel }}
        </div>
      </nav>
    </header>
    <main class="main">
      <div class="content">
        <h1>{{ video.infered_titel }}</h1>
        <!-- List of infomations about lecture -->
        <ul class="lecture-information">
          <li>
            Course: <span class="course-name">Course Name {# TODO: #}</span>
          </li>
          <li>
            Lecturer(s): {# TODO: Only display 's' if lecture has multiple lecturers #}
            <ul class="professor-list">
              <li class="professor">
                Professor 1 {# TODO: #}
              </li>
              <li class="professor">
                Professor 2 {# TODO: #}
              </li>
              <li class="professor">
                Professor 3 {# TODO: #}
              </li>
            </ul>
          </li>
          <li>
            Year: <span class="year">Year {# TODO: #}</span>
          </li>
          <li>
            Semester: <span class="semester">Semester {# TODO: #}</span>
          </li>
          <li>
            Language: <span class="language">Language {# TODO: #}</span>
          </li>
          <li>
            Duration: <span class="duration">Duration {# TODO: #}</span>
          </li>
          <li>
            Number of Words: <span class="number-of-words">Number of Words</span>
          </li>
        </ul>
        <div class="topics-wrapper">
          {% if topic_list %}
            {% for topic in topic_list %}
              <div class="topic-wrapper">
                <div class="topic-title-wrapper">
                  <span class="topic-title">{{ topic.title }}</span>
                  <div class="button-wrapper">
                    <button class="less-detailed disabled">Less Details</button>
                    <button class="more-detailed">More Details</button>
                  </div>
                </div>

                {# Short Summary #}
                <div class="summary short">
                  <ul class="bullet-point-list">
                    {% for bulletpoint in topic.bulletpoints %}
                      <li class="bullet-point">{{ bulletpoint }}</li>
                    {% endfor %}
                  </ul>
                </div>

                {# Medium Summary #}
                <div class="summary medium" style="display: none;"><p>{{ topic.summary }}</p></div>

                {# Long Summary #}
                <div class="summary long" style="display: none;">
                  {% for chunk in topic.chunks %}
                    <p>{{ chunk }}</p>
                  {% endfor %}
                </div>
                {# TODO: Replace with full implementation #}
              </div>
            {% endfor %}
          {% endif %}
        </div>
        <script>
          window.onload = () => {
            topicWrappers = document.getElementsByClassName('topic-wrapper')
            for (let topicWrapper of topicWrappers) {
              // Get buttons
              lessDetailedButton = topicWrapper.getElementsByClassName('less-detailed')[0]
              moreDetailedButton = topicWrapper.getElementsByClassName('more-detailed')[0]
          
              // Set a data state "granularity" for element topicWrapper to 0
              topicWrapper.setAttribute('data-granularity', 0)
          
              // Add event listeners to toggle visibilities
              lessDetailedButton.addEventListener('click', function () {
                granularity = parseInt(topicWrapper.getAttribute('data-granularity'))
                switch (granularity) {
                  case 1:
                    // hide medium summary
                    topicWrapper.getElementsByClassName('summary medium')[0].style.display = 'none'
                    // show short summary
                    topicWrapper.getElementsByClassName('summary short')[0].style.display = 'block'
                    // set granularity to 0
                    topicWrapper.setAttribute('data-granularity', 0)
                    // disable less detailed button
                    lessDetailedButton.classList.add('disabled')
                    break
                  case 2:
                    // hide long summary
                    topicWrapper.getElementsByClassName('summary long')[0].style.display = 'none'
                    // show medium summary
                    topicWrapper.getElementsByClassName('summary medium')[0].style.display = 'block'
                    // set granularity to 1
                    topicWrapper.setAttribute('data-granularity', 1)
                    // enable more detailed button
                    moreDetailedButton.classList.remove('disabled')
                    break
                  default:
                    break
                }
              })
              moreDetailedButton.addEventListener('click', function () {
                granularity = parseInt(topicWrapper.getAttribute('data-granularity'))
                switch (granularity) {
                  case 0:
                    // hide short summary
                    topicWrapper.getElementsByClassName('summary short')[0].style.display = 'none'
                    // show medium summary
                    topicWrapper.getElementsByClassName('summary medium')[0].style.display = 'block'
                    // set granularity to 1
                    topicWrapper.setAttribute('data-granularity', 1)
                    // enable less detailed button
                    lessDetailedButton.classList.remove('disabled')
                    break
                  case 1:
                    // hide medium summary
                    topicWrapper.getElementsByClassName('summary medium')[0].style.display = 'none'
                    // show long summary
                    topicWrapper.getElementsByClassName('summary long')[0].style.display = 'block'
                    // set granularity to 2
                    topicWrapper.setAttribute('data-granularity', 2)
                    // disable more detailed button
                    moreDetailedButton.classList.add('disabled')
                    break
                  default:
                    break
                }
              })
            }
          }
        </script>
      </div>
    </main>
    <footer class="footer">
      <div class="div-wrapper">
        <div class="text-wrapper">
          <a href="#">About</a>
        </div>
      </div>
      <div class="div-wrapper">
        <div class="text-wrapper">
          <a href="#">Impressum</a>
        </div>
      </div>
      <div class="div-wrapper">
        <div class="text-wrapper">
          <a href="#">Video Portal</a>
        </div>
      </div>
    </footer>
  </body>
</html>
